<svg viewBox="0 0 600 600" xmlns="http://www.w3.org/2000/svg">
    <!-- Definitions for markers (arrowheads) -->
    <defs>
        <marker id="arrow" viewBox="0 0 10 10" refX="5" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse">
            <path d="M 0 0 L 10 5 L 0 10 z" fill="#333" />
        </marker>
        <marker id="arrow-success" viewBox="0 0 10 10" refX="5" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse">
            <path d="M 0 0 L 10 5 L 0 10 z" fill="#28a745" />
        </marker>
        <marker id="arrow-fail" viewBox="0 0 10 10" refX="5" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse">
            <path d="M 0 0 L 10 5 L 0 10 z" fill="#dc3545" />
        </marker>
    </defs>

    <!-- Base Styles -->
    <style>
        .box {
            fill: #fff;
            stroke: #333;
            stroke-width: 2;
            transition: fill 0.3s ease-in-out;
        }
        .label {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            font-size: 14px;
            text-anchor: middle;
            fill: #000;
        }
        .connector {
            stroke: #333;
            stroke-width: 2;
            marker-end: url(#arrow);
            transition: stroke 0.3s ease-in-out;
        }
    </style>

    <!-- Component Boxes -->
    <g id="component-client">
        <rect x="20" y="110" width="100" height="50" rx="5" class="box" />
        <text x="70" y="140" class="label">Client</text>
    </g>
    <g id="component-apisix">
        <rect x="170" y="110" width="100" height="50" rx="5" class="box" />
        <text x="220" y="140" class="label">APISIX</text>
    </g>
    <g id="component-pap">
        <rect x="320" y="110" width="100" height="50" rx="5" class="box" />
        <text x="370" y="140" class="label">PAP Service</text>
    </g>
    <g id="component-opa">
        <rect x="470" y="20" width="100" height="50" rx="5" class="box" />
        <text x="520" y="50" class="label">OPA</text>
    </g>
    <g id="component-mockdata">
        <rect x="470" y="200" width="100" height="50" rx="5" class="box" />
        <text x="520" y="220" class="label">Mock Data</text>
        <text x="520" y="240" class="label">Service</text>
    </g>

    <!-- Connectors -->
    <!-- Client -> APISIX -->
    <path id="path-client-apisix" class="connector" d="M 120 135 L 170 135" />
    
    <!-- APISIX -> PAP -->
    <path id="path-apisix-pap" class="connector" d="M 270 135 L 320 135" />
    
    <!-- PAP -> OPA (request) -->
    <path id="path-pap-opa" class="connector" d="M 370 110 Q 370 70, 470 55" fill="none" />
    
    <!-- OPA -> PAP (response) -->
    <path id="path-opa-pap" class="connector" d="M 470 45 Q 390 20, 370 110" fill="none" />

    <!-- PAP -> Mock Data (on success) -->
    <path id="path-pap-mockdata" class="connector" d="M 370 160 Q 370 200, 470 215" fill="none" />
    
    <!-- PAP -> Client (on fail) -->
    <path id="path-pap-client-fail" class="connector" d="M 320 120 Q 250 50, 70 110" fill="none" style="stroke-dasharray: 5,5;"/>

</svg>
